<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="main.css">
</head>

<body>
  <div class="main">

    <form action="" method="POST" class="form" id="form-1">
      <h3 class="heading">Thành viên đăng ký</h3>
      <p class="desc">form</p>

      <div class="spacer"></div>
      <div class="form-main">
        <div class="form-input">
          <div class="form-group">
            <label for="fullname" class="form-label">Tên</label>
            <input id="fullname" name="fullname" rules="required" type="text"  data-errorMsg="Vui lòng nhập tên" placeholder="VD: Đăng Khoa"
              class="form-control">
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="email" class="form-label">Email</label>
            <input id="email" name="email" type="text" rules="required|email" placeholder="VD: email@domain.com"
              class="form-control">
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="c_email" class="form-label">Nhập lại email</label>
            <input id="c_email" name="email" type="text" rules="required|comparewith:email"
              data-errorMsg="Email not match" placeholder="VD: email@domain.com" class="form-control">
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="password" class="form-label">Mật khẩu</label>
            <input id="password" name="password" type="password" rules="required|min:6" placeholder="Nhập mật khẩu"
              class="form-control">
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="password_confirmation" class="form-label">Nhập lại mật khẩu</label>
            <input id="password_confirmation" name="password" rules="required|comparewith:password"
              data-errorMsg="Mật khẩu không đúng" placeholder="Nhập lại mật khẩu" type="password" class="form-control">
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="gender" class="form-label">Giới tính</label>
            <div class="inline-block">
              <label><input name="gender" type="radio" value="nam" class="form-control" rules="required" data-errorMsg="Vui lòng chọn giới tính"><span>nam</span></label>
              <label><input name="gender" type="radio" value="nữ" class="form-control" rules="required"  data-errorMsg="Vui lòng chọn giới tính"><span>nữ</span></label>
            </div>
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="province" class="form-label">Tỉnh/ Thành Phố</label>
            <select name="province" id="province" class="form-control">
              <option value="">Tỉnh/ Thành Phố</option>
              <option value="Tay Ninh">Tây Ninh</option>
              <option value="Ho Chi Minh">Hồ Chí Minh</option>
              <option value="Ha Noi">Hà Nội</option>
            </select>
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="gender" class="form-label">現在の職業</label>
            <div class="inline-block">
              <label class="i-custom"><input rules="required" type="radio" name="job" value="高校生"> <span>高校生</span></label>
              <label class="i-custom"><input rules="required" type="radio" name="job" value="大学生"> <span>大学生</span></label>
              <label class="i-custom"><input rules="required" type="radio" name="job" value="大学院生"><span>大学院生</span></label>
              <label class="i-custom"><input rules="required" type="radio" name="job" value="短大生"> <span>短大生</span></label>
            </div>
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="color" class="form-label">Màu sắc</label>
            <div class="inline-block">
              <label><input rules="required" name="color" type="checkbox" value="xanh" class="form-control"><span>xanh</span></label>
              <label><input rules="required" name="color" type="checkbox" value="đỏ" class="form-control"><span>đỏ</span></label>
              <label><input rules="required" name="color" type="checkbox" value="tím" class="form-control"><span>tím</span></label>
            </div>
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="color" class="form-label">Avatar</label>
            <div class="inline-block">
              <label><input name="file" type="file" value="file" class="form-control"></label>
            </div>
            <span class="form-message"></span>
          </div>
  
          <div class="form-group">
            <label for="color" class="form-label">Avatar1</label>
            <div class="inline-block">
              <label><input name="file2" type="file" value="file" class="form-control"></label>
            </div>
            <span class="form-message"></span>
          </div>
  
          
        </div>
        <button class="confirm-btn before-submit">Đăng ký</button>
        <button class="confirm-btn after-submit">Đăng ký</button>
        <button class="confirm-btn form-back">Back</button>
      </div>
    </form>
    <div class="cursor" id="cursor"></div>
  </div>
  <script src="./jquery-1.11.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js"></script>
  <script src="./validator2.js"></script>
  <!-- <script src="./main.js"></script> -->
  <script>
    var form = new Validator('#form-1')
    form.onSubmit = function (formData) {
      var json=JSON.stringify(formData)
     console.log(json);

    //  var http = new XMLHttpRequest();
    // var url = 'http://localhost:3000/mailform';
    // var params = JSON.stringify(formData);
    // http.open('POST', url, true);

    // //Send the proper header information along with the request
    // http.setRequestHeader('Content-type', 'application/json');

    // http.onreadystatechange = function() {//Call a function when the state changes.
    //     if(http.readyState == 4 && http.status == 200) {
    //         alert(http.responseText);
    //     }
    // }
    // http.send(formData);

      $.ajax({
            url: 'http://localhost:3000/mailform',
            type: 'POST',
            crossDomain: true,
            contentType: 'application/json',
            data:json,
            
            beforeSend: function() {
              if ($(".fc-loading").length < 1) $("body").append('<div class="fc-loading" />');
                $(".fc-loading").addClass("active");
                // elm.find("button").prop("disabled", true);
            },
            success: function(json) {
              console.log(json);
              if (json.status == "success") {
                $(".fc-loading").removeClass("active");
              }
            },
            error: function(json){
              alert(json.error)
              console.log(json.error);
              $(".fc-loading").removeClass("active");
            }
        })
    }
 
  </script>
</body>

</html>